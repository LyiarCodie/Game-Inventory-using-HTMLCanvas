(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function o(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(i){if(i.ep)return;i.ep=!0;const n=o(i);fetch(i.href,n)}})();function f(e=0,t=0){return{x:e,y:t}}function x(e=0,t=0){return{w:e,h:t}}function O(e,t,o){const s={position:{...o.getPosition()},size:{...o.getSize()}};return e>s.position.x&&e<s.position.x+s.size.w&&t>s.position.y&&t<s.position.y+s.size.h}function L(e=0,t=0){const o=canvas.getBoundingClientRect(),s=canvas.width/o.width,i=canvas.height/o.height,n=Math.round((e-o.left)*s),u=Math.round((t-o.top)*i);return f(n,u)}const T=document.getElementById("itemsImg"),h=(e,t)=>{const o=f(),s=x(16,16);return{draw:()=>{e.drawImage(T,16*t.column,16*t.row,16,16,o.x,o.y,s.w,s.h)},setPosition:(p={x:0,y:0})=>{Object.assign(o,p)},getPosition:()=>({x:o.x,y:o.y}),getSize:()=>({w:s.w,h:s.h})}},A=e=>h(e,{row:0,column:0}),M=e=>h(e,{row:0,column:1}),R=e=>h(e,{row:0,column:2}),F=e=>h(e,{row:1,column:0}),j=e=>h(e,{row:1,column:1}),N=e=>h(e,{row:1,column:2}),X=e=>{let t=f(10,10),o=x(16,16),s=null,i=!1;const n=a=>{s=a},u=()=>s,C=(a={x:0,y:0})=>{Object.assign(t,a)},p=()=>{},z=()=>({w:o.w,h:o.h}),l=()=>({x:t.x,y:t.y}),r=(a=!0)=>{if(typeof a!="boolean"){console.error("The assigned value is invalid! Expecting a `boolean` value");return}i=a},g=()=>{e.strokeStyle="white",e.beginPath(),e.moveTo(t.x,t.y+.5),e.lineTo(t.x+o.w-.5,t.y+.5),e.lineTo(t.x+o.w-.5,t.y+o.h-.5),e.lineTo(t.x+.5,t.y+o.h-.5),e.lineTo(t.x+.5,t.y+.5),e.stroke()};return{draw:()=>{i&&g(),s&&"draw"in s&&s.draw()},update:p,setPosition:C,getSize:z,getPosition:l,setHover:r,getItem:u,setItem:n}},b=document.getElementById("inventoryImg");function Y(e,t){const o=x(b.width,b.height),s=f(o.w/2,o.h/2-7),i=15,n=new Array(i);return(()=>{let a=0;for(let y=0;y<n.length/5;y++)for(let I=0;I<n.length/3;I++){const c=X(e),k=s.x+2+c.getSize().w*I+1*I,B=s.y+2+c.getSize().h*y+1*y;c.setPosition(f(k,B)),n[a]=c,a++}})(),(()=>{const l=[R(e),A(e),M(e),j(e),F(e),N(e)];let r=0;for(;r<l.length;){let g=Math.floor(Math.random()*n.length);const d=n[g];if(d.getItem()==null){const a=l[r];a.setPosition(d.getPosition()),d.setItem(a),r+=1}}})(),{draw:()=>{e.drawImage(b,s.x,s.y,o.w,o.h);for(let l=0;l<n.length;l++){const r=n[l];r&&(r.draw&&r.draw(),r.update&&r.update())}},update:()=>{for(let l=0;l<n.length;l++){const r=n[l];if(O(t.getPosition().x,t.getPosition().y,r)){if(r.setHover(!0),t.getClick()&&t.getItem()==null)t.setItem(r.getItem()),r.setItem(null);else if(t.getClick()&&r.getItem()==null){const g=t.getItem();g.setPosition(r.getPosition()),r.setItem(g),t.setItem(null)}else if(t.getClick()&&r.getItem()!=null){const g=r.getItem(),d=t.getItem();d.setPosition(r.getPosition()),r.setItem(d),t.setItem(g)}}else r.setHover(!1)}}}}const E=document.getElementById("cursorImg");function q(e){let t=f(0,0),o=x(E.width,E.height),s=!1,i=!1,n=null;return{draw:()=>{n?"draw"in n&&n.draw():e.drawImage(E,t.x,t.y,o.w,o.h)},update:()=>{n&&"setPosition"in n&&n.setPosition({x:t.x-n.getSize().w/2,y:t.y-n.getSize().h/2})},setPosition:c=>{Object.assign(t,c)},getPosition:()=>({x:t.x,y:t.y}),getSize:()=>({w:o.w,h:o.h}),getClick:()=>i,setClick:(c=!0)=>{if(typeof c!="boolean"){console.error("The assigned value is invalid! Expecting a `boolean` value");return}i=c},setItem:c=>{n=c},getItem:()=>n,getHolding:()=>s,setHolding:(c=!0)=>{if(typeof c!="boolean"){console.error("The assigned value is invalid! Expecting a `boolean` value");return}i=c}}}function W(e){return{draw:()=>{e.fillStyle="black",e.fillRect(0,0,canvas.width,canvas.height)}}}const w=document.getElementById("canvas"),S=w.getContext("2d"),D=document.getElementById("start"),K=document.getElementById("stop");w.width=172;w.height=96;S.imageSmoothingEnabled=!1;let _=0,P=!1;const v=[],m=q(S),V=Y(S,m);v.push(W(S));v.push(V);v.push(m);w.addEventListener("mousemove",({clientX:e,clientY:t})=>{m.setPosition(L(e,t))});w.addEventListener("mousedown",()=>{m.getHolding()||(m.setClick(!0),m.setHolding(!0))});w.addEventListener("mouseup",()=>{m.getHolding()&&m.setHolding(!1)});function H(){for(let e=0;e<v.length;e++){const t=v[e];t&&("draw"in t&&t.draw(),"update"in t&&t.update())}m.setClick(!1),_=requestAnimationFrame(H)}D.onclick=()=>{P||(H(),P=!0,console.clear(),console.log("Running"))};K.onclick=()=>{P&&(cancelAnimationFrame(_),P=!1,console.log("Stopped"))};
